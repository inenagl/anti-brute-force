# anti-brute-force
Проектная работа на курсе OTUS "Golang Developer. Professional"

### Полезные команды

```
# Локальные операции 
make run-db        # запустить контейнер с базой данных
make install-goose # установить библиотеку для применения миграций
make migrate       # запустить миграции
make lint          # запустить линтеры
make test          # запустить unit-тесты (среди них временно есть функциональные, для которых необходима поднятая БД)
make run           # запустить сервер с grpc-api локально (выход через ^C)
make stop-db       # остановить контейнер с базой данных

# Операции с контейнерами
make up            # поднять контейнеры с БД и сервисом антибрутфорса
make up-build      # сбилдить и поднять контейнеры с БД и сервисом антибрутфорса
make down          # погасить контейнеры с БД и сервисом антибрутфорса

# Операции с интеграционными тестами
make integration-tests-build        # собрать все контейнеры, необходимые для тестирования
make integration-tests-build_tests  # собрать только контейнер с тестами (удобно при отладке и написании новых тестов)
make integration-tests              # запустить интеграционные тесты

# Запуск CLI-инструмента (при поднятом в композере проекте)
make run-cli                        
# Либо можно собрать его с помощью  
make build-cli 
# и запускать 
./bin/abf-cli -h <host> -p <port>   # где -h и -p хост и порт сервиса антибрутфорса. По умолчанию localhost и 8889
```

### Чек-лист

- [X] общая структура проекта
- [X] модули логирования и конфигурирования
- [X] core логика с реализацией алгоритма leaky bucket
- [X] реализация хранилища для чб-списков (на основе PostgresQL)
- [X] реализация in-memory хранилища для бакетов
- [X] реализация grpc-сервера
- [X] реализация методов api
- [X] покрытие unit-тестами внутренних библиотек, за исключением реализации сервера и БД-хранилища, для которых более уместны интеграционные тесты
- [X] настройка CI
- [X] докеризация приложения
- [X] интеграционные тесты
- [X] CLI-инструмент для работы с сервисом
